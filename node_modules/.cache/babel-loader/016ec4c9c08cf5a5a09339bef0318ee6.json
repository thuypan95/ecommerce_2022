{"ast":null,"code":"var _jsxFileName = \"/Users/vnng-it/Documents/projects/react-hook/client-project-shop/src/components/Category/ListProduct.js\",\n    _s = $RefreshSig$();\n\nimport axios from \"axios\";\nimport { useEffect, useState } from \"react\";\nimport { baseURL, domainProduct } from \"../../api\";\nimport LoadingList from \"../UI/LoadingList\";\nimport ProductItem from \"../Products/ProductItem\";\nimport ReactPaginate from 'react-paginate';\nimport qs from 'qs';\nimport { useSelector } from \"react-redux\";\nimport { useDispatch } from \"react-redux\";\nimport { productActions } from \"../../redux/product-slice\";\nimport { useLocation } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ListProduct = () => {\n  _s();\n\n  const queryLocation = useLocation().search;\n  const searchText = new URLSearchParams(queryLocation).get('search');\n  const [list, setList] = useState([]);\n  const [offset, setOffset] = useState(0);\n  const [pageCount, setPageCount] = useState(0);\n  const [isLoading, setIsLoading] = useState(false);\n  const filterCategory = useSelector(state => state.product.filterCat);\n  const filterColor = useSelector(state => state.product.filterColor);\n  const filterSize = useSelector(state => state.product.filterSize);\n  const filterPriceStart = useSelector(state => state.product.filterPriceStart);\n  const filterPriceEnd = useSelector(state => state.product.filterPriceEnd);\n  const limit = 8;\n  const query = qs.stringify({\n    categories: filterCategory,\n    colors: filterColor,\n    sizes: filterSize,\n    price_lte: filterPriceEnd,\n    price_gte: filterPriceStart,\n    name_containss: searchText\n  });\n  const dispatch = useDispatch();\n  useEffect(() => {\n    const countListProduct = async () => {\n      setIsLoading(true);\n      await axios.get(`${baseURL + domainProduct}/count?${query}`).then(response => {\n        const data = response.data;\n        setPageCount(Math.ceil(data / limit));\n        setIsLoading(false);\n      }).catch(error => {\n        setIsLoading(false);\n      });\n    };\n\n    countListProduct();\n  }, [query]);\n\n  const listProduct = async () => {\n    setIsLoading(true);\n    await axios.get(`${baseURL + domainProduct}/?${query}&_start=${offset}&_limit=${limit}`).then(response => {\n      const data = response.data;\n      setList(data);\n      setIsLoading(false);\n    }).catch(error => {\n      setIsLoading(false);\n    });\n  };\n\n  useEffect(() => {\n    listProduct(); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [offset, query]);\n\n  const handlePageClick = data => {\n    let selected = data.selected;\n    let offset = Math.ceil(selected * limit);\n    setOffset(offset);\n    listProduct();\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"w-full lg:w-3/4 py-3\",\n    children: [isLoading ? /*#__PURE__*/_jsxDEV(LoadingList, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 25\n    }, this) : list.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-wrap\",\n        children: list.map(i => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-1/2 md:w-1/4 p-2 mb-2\",\n          children: /*#__PURE__*/_jsxDEV(ProductItem, {\n            handleDelete: () => {\n              dispatch(productActions.deleteFilter());\n            },\n            id: i.id,\n            name: i.name,\n            price: i.price,\n            imgUrl: i.images,\n            categories: i.categories,\n            item: i\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 41\n          }, this)\n        }, i.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 37\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 25\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 21\n    }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-center\",\n      children: \"No items\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 23\n    }, this), list.length > 0 && /*#__PURE__*/_jsxDEV(ReactPaginate, {\n      previousLabel: 'Previous',\n      previousClassName: 'mr-4',\n      nextClassName: 'ml-4',\n      nextLabel: 'Next',\n      breakLabel: '...',\n      breakClassName: 'break-me',\n      pageCount: pageCount,\n      pageClassName: 'h-8 w-8 flex items-center justify-center rounded-sm',\n      onPageChange: handlePageClick,\n      containerClassName: 'flex justify-center items-center',\n      activeClassName: 'bg-green-600 text-white'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 32\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 13\n  }, this);\n};\n\n_s(ListProduct, \"E2JMSA8OR5AsypvEK7O3ESuWpIg=\", false, function () {\n  return [useLocation, useSelector, useSelector, useSelector, useSelector, useSelector, useDispatch];\n});\n\n_c = ListProduct;\nexport default ListProduct;\n\nvar _c;\n\n$RefreshReg$(_c, \"ListProduct\");","map":{"version":3,"sources":["/Users/vnng-it/Documents/projects/react-hook/client-project-shop/src/components/Category/ListProduct.js"],"names":["axios","useEffect","useState","baseURL","domainProduct","LoadingList","ProductItem","ReactPaginate","qs","useSelector","useDispatch","productActions","useLocation","ListProduct","queryLocation","search","searchText","URLSearchParams","get","list","setList","offset","setOffset","pageCount","setPageCount","isLoading","setIsLoading","filterCategory","state","product","filterCat","filterColor","filterSize","filterPriceStart","filterPriceEnd","limit","query","stringify","categories","colors","sizes","price_lte","price_gte","name_containss","dispatch","countListProduct","then","response","data","Math","ceil","catch","error","listProduct","handlePageClick","selected","length","map","i","deleteFilter","id","name","price","images"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport { useEffect, useState } from \"react\";\nimport { baseURL, domainProduct } from \"../../api\";\nimport LoadingList from \"../UI/LoadingList\";\nimport ProductItem from \"../Products/ProductItem\";\nimport ReactPaginate from 'react-paginate';\nimport qs from 'qs';\nimport { useSelector } from \"react-redux\";\nimport { useDispatch } from \"react-redux\";\nimport { productActions } from \"../../redux/product-slice\";\nimport { useLocation } from \"react-router-dom\";\n\nconst ListProduct = () => {\n    const queryLocation = useLocation().search;\n    const searchText = new URLSearchParams(queryLocation).get('search');\n\n    const [list, setList] = useState([]);\n    const [offset, setOffset] = useState(0);\n    const [pageCount, setPageCount] = useState(0);\n    const [isLoading, setIsLoading] = useState(false);\n    const filterCategory = useSelector(state => state.product.filterCat);\n    const filterColor = useSelector(state => state.product.filterColor);\n    const filterSize = useSelector(state => state.product.filterSize);\n    const filterPriceStart = useSelector(state => state.product.filterPriceStart);\n    const filterPriceEnd = useSelector(state => state.product.filterPriceEnd);\n    const limit = 8;\n    const query = qs.stringify({ categories: filterCategory, colors: filterColor, sizes: filterSize, price_lte: filterPriceEnd, price_gte: filterPriceStart, name_containss: searchText });\n    const dispatch = useDispatch();\n    useEffect(() => {\n        const countListProduct = async () => {\n            setIsLoading(true);\n\n            await axios.get(`${baseURL + domainProduct}/count?${query}`)\n                .then(response => {\n                    const data = response.data;\n                    setPageCount(Math.ceil(data / limit));\n                    setIsLoading(false);\n                })\n                .catch(error => {\n                    setIsLoading(false);\n                })\n        };\n        countListProduct();\n    }, [query]);\n    const listProduct = async () => {\n        setIsLoading(true);\n        await axios.get(`${baseURL + domainProduct}/?${query}&_start=${offset}&_limit=${limit}`)\n            .then(response => {\n                const data = response.data;\n                setList(data);\n                setIsLoading(false);\n            })\n            .catch(error => {\n                setIsLoading(false);\n            })\n    };\n    useEffect(() => {\n        listProduct();\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [offset, query]);\n    const handlePageClick = (data) => {\n        let selected = data.selected;\n        let offset = Math.ceil(selected * limit);\n        setOffset(offset);\n        listProduct();\n    }\n\n    return (<div className=\"w-full lg:w-3/4 py-3\">\n        {\n            isLoading ? <LoadingList /> :\n                list.length > 0 ?\n                    <div>\n                        <div className=\"flex flex-wrap\">\n                            {\n                                list.map(i => (\n                                    <div className=\"w-1/2 md:w-1/4 p-2 mb-2\" key={i.id}>\n                                        <ProductItem handleDelete={() => { dispatch(productActions.deleteFilter()) }} id={i.id} name={i.name} price={i.price} imgUrl={i.images} categories={i.categories} item={i} />\n                                    </div>\n                                ))\n                            }\n                        </div>\n\n                    </div>\n                    : <p className=\"text-center\">No items</p>\n        }\n        {\n            list.length > 0 && <ReactPaginate\n                previousLabel={'Previous'}\n                previousClassName={'mr-4'}\n                nextClassName={'ml-4'}\n                nextLabel={'Next'}\n                breakLabel={'...'}\n                breakClassName={'break-me'}\n                pageCount={pageCount}\n                pageClassName={'h-8 w-8 flex items-center justify-center rounded-sm'}\n                onPageChange={handlePageClick}\n                containerClassName={'flex justify-center items-center'}\n                activeClassName={'bg-green-600 text-white'}\n            />\n        }\n\n    </div>)\n}\nexport default ListProduct;"]},"metadata":{},"sourceType":"module"}