{"ast":null,"code":"var _jsxFileName = \"/Users/vnng-it/Documents/projects/react-hook/client-project-shop/src/components/MyOrders/OrderDetail.js\",\n    _s = $RefreshSig$();\n\nimport axios from \"axios\";\nimport { useEffect, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport Dropzone from \"../UI/Dropzone\";\nimport RatingReview from \"../UI/Rating\";\nimport { baseURL } from \"../../api\";\nimport { authHeader } from \"../../functions\";\nimport LoadingList from \"../UI/LoadingList\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst OrderDetail = _ref => {\n  _s();\n\n  let {\n    detail\n  } = _ref;\n  const [activeFit, setActiveFit] = useState(null);\n  const listFit = [{\n    label: 'Too Small'\n  }, {\n    label: 'True to Fit'\n  }, {\n    label: 'Too Large'\n  }];\n  const history = useHistory();\n  const [files, setFiles] = useState([]);\n  const [valueRating, setValueRating] = useState(5);\n  const [reviewContent, setReviewContent] = useState('');\n  const [review, setReview] = useState(null);\n  const [loadingReview, setLoadingReview] = useState(false);\n  const [loadingUpload, setLoadingUpload] = useState(false);\n  const [errFit, setErrFit] = useState('');\n  const [errContent, setErrContent] = useState('');\n  const [errUpload, setErrUpload] = useState('');\n\n  const handleFit = label => {\n    setActiveFit(label);\n\n    if (activeFit === label) {\n      setActiveFit(null);\n    }\n  };\n\n  useEffect(() => {\n    setLoadingReview(true);\n    axios.get(`${baseURL}/reviews?order=${detail.id}`).then(response => {\n      if (response.data) {\n        setLoadingReview(false);\n        setReview(response.data[0]);\n      }\n\n      setReview(null);\n    });\n  }, []);\n\n  const handleChangeRating = value => {\n    setValueRating(value);\n  };\n\n  const handleReview = () => {\n    let formData = new FormData();\n\n    for (let i = 0; i < files.length; i++) {\n      formData.append(\"files\", files[i]);\n    }\n\n    if (activeFit === null) {\n      setErrFit('You must select one option');\n    } else {\n      setErrFit('');\n    }\n\n    if (reviewContent === '') {\n      setErrContent('You must enter review');\n    } else {\n      setErrContent('');\n    }\n\n    if (files.length === 0) {\n      setErrUpload('You must upload least one image or video');\n    } else {\n      setErrUpload('');\n    }\n\n    if (activeFit !== null && reviewContent !== '' && files.length !== 0) setLoadingUpload(true);\n    axios.post(`${baseURL}/upload`, formData, authHeader()).then(response => {\n      if (response.data) {\n        const data = {\n          rating: valueRating,\n          review_content: reviewContent,\n          order: detail,\n          fit: activeFit,\n          images: response.data\n        };\n        axios.post(`${baseURL}/reviews`, data, authHeader()).then(response => {\n          setReview(response === null || response === void 0 ? void 0 : response.data);\n          setLoadingUpload(false);\n        }).catch(err => {\n          setLoadingUpload(false);\n          console.log(err);\n        });\n      }\n    }).catch(err => {\n      setLoadingUpload(false);\n      console.log(err);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"lg:border-l lg:ml-6 lg:pl-6 lg:w-1/3 lg:mt-0 mt-6 w-full md:flex md:justify-between lg:block\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"md:w-1/2 lg:w-full\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"font-semibold text-sm\",\n        children: [\"Order #\", detail.number_order]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-4\",\n        children: detail.dishes.length > 0 && detail.dishes.map((item, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex mt-3 text-xs\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: item.imgUrl,\n            alt: item.name,\n            className: \"w-10 rounded-sm\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-1 mx-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"cursor-pointer\",\n              onClick: () => history.push('/product/' + item.id),\n              children: item.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"mt-2 text-gray-400\",\n              children: [item.size, \" - \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 29\n            }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-gray-400  mt-2 uppercase\",\n              children: item.color\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 88\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"font-semibold\",\n            children: [\"$\", item.price]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 25\n          }, this)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 21\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-between my-4 border-b border-dotted pb-3 w-2/3 ml-auto\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"font-semibold text-xs\",\n          children: \"Shipping fee\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"font-semibold text-xs\",\n          children: \"$0.00\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-between w-2/3 ml-auto\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"font-semibold text-md\",\n          children: \"Total\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"font-bold text-md\",\n          children: [\"$\", Number(detail.amount).toFixed(2)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"md:w-1/2 md:pl-8 lg:w-full lg:pl-0\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"font-semibold text-sm mt-4 mb-1\",\n          children: \"Your shipping address :\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-xs italic text-gray-500\",\n          children: [detail.info_shipping.first_name, \" \", detail.info_shipping.last_name, \", \", detail.info_shipping.phone_number]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-xs italic text-gray-500\",\n          children: [detail.info_shipping.address, \", \", detail.info_shipping.city, \", \", detail.info_shipping.state]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 13\n      }, this), detail.note !== null && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"font-semibold text-sm mt-4 mb-1\",\n          children: \"Note your order :\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-gray-100 p-2 text-xs border italic text-gray-500\",\n          children: detail.note\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 38\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 9\n    }, this), review === null ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"md:w-1/2 lg:w-full mt-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"font-semibold text-sm\",\n        children: \"Your rating and reviews\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \" border px-3.5 py-6 flex flex-col items-center justify-center rounded-md mt-3\",\n        children: [/*#__PURE__*/_jsxDEV(RatingReview, {\n          handleChangeRating: handleChangeRating,\n          valueRating: valueRating\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-full mt-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-xs ml-1\",\n            children: \"Size & Fit of the product\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-xs flex mt-2\",\n            children: listFit.map((item, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n              onClick: handleFit.bind(null, item.label),\n              className: `${activeFit === item.label && 'border-green-600'} border  h-10 w-1/3 flex items-center justify-center mx-1 cursor-pointer `,\n              children: item.label\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 128,\n              columnNumber: 37\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 25\n          }, this), errFit !== '' && /*#__PURE__*/_jsxDEV(\"p\", {\n            children: errFit\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 43\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-full mt-4 px-1\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-xs ml-1\",\n            children: \"Review content\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            className: \"w-full rounded-lg border p-4 outline-none mt-2 block\",\n            rows: 3,\n            onChange: event => setReviewContent(event.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 25\n          }, this), errContent !== '' && /*#__PURE__*/_jsxDEV(\"p\", {\n            children: errContent\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 47\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-4 px-1\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-xs ml-1 mb-2\",\n            children: \"Upload images\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Dropzone, {\n            setFiles: setFiles,\n            files: files\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 25\n          }, this), errUpload !== '' && /*#__PURE__*/_jsxDEV(\"p\", {\n            children: errUpload\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 46\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleReview,\n          disabled: loadingUpload,\n          className: \"h-10 bg-black text-white px-4 rounded-sm\",\n          children: loadingUpload ? 'Loading...' : 'ADD REVIEW'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 31\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"md:w-1/2 lg:w-full mt-4\",\n      children: /*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"font-semibold text-sm\",\n        children: \"Your rating and reviews\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 22\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 12\n  }, this);\n};\n\n_s(OrderDetail, \"+tYW9MIOhZyvQNCLFYHLGdtQFKw=\", false, function () {\n  return [useHistory];\n});\n\n_c = OrderDetail;\nexport default OrderDetail;\n\nvar _c;\n\n$RefreshReg$(_c, \"OrderDetail\");","map":{"version":3,"sources":["/Users/vnng-it/Documents/projects/react-hook/client-project-shop/src/components/MyOrders/OrderDetail.js"],"names":["axios","useEffect","useState","useHistory","Dropzone","RatingReview","baseURL","authHeader","LoadingList","OrderDetail","detail","activeFit","setActiveFit","listFit","label","history","files","setFiles","valueRating","setValueRating","reviewContent","setReviewContent","review","setReview","loadingReview","setLoadingReview","loadingUpload","setLoadingUpload","errFit","setErrFit","errContent","setErrContent","errUpload","setErrUpload","handleFit","get","id","then","response","data","handleChangeRating","value","handleReview","formData","FormData","i","length","append","post","rating","review_content","order","fit","images","catch","err","console","log","number_order","dishes","map","item","index","imgUrl","name","push","size","color","price","Number","amount","toFixed","info_shipping","first_name","last_name","phone_number","address","city","state","note","bind","event","target"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,OAAOC,QAAP,MAAqB,gBAArB;AACA,OAAOC,YAAP,MAAyB,cAAzB;AACA,SAASC,OAAT,QAAwB,WAAxB;AACA,SAASC,UAAT,QAA2B,iBAA3B;AACA,OAAOC,WAAP,MAAwB,mBAAxB;;;AACA,MAAMC,WAAW,GAAG,QAAgB;AAAA;;AAAA,MAAf;AAAEC,IAAAA;AAAF,GAAe;AAChC,QAAM,CAACC,SAAD,EAAYC,YAAZ,IAA4BV,QAAQ,CAAC,IAAD,CAA1C;AACA,QAAMW,OAAO,GAAG,CAAC;AAAEC,IAAAA,KAAK,EAAE;AAAT,GAAD,EAAyB;AAAEA,IAAAA,KAAK,EAAE;AAAT,GAAzB,EAAmD;AAAEA,IAAAA,KAAK,EAAE;AAAT,GAAnD,CAAhB;AACA,QAAMC,OAAO,GAAGZ,UAAU,EAA1B;AACA,QAAM,CAACa,KAAD,EAAQC,QAAR,IAAoBf,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAM,CAACgB,WAAD,EAAcC,cAAd,IAAgCjB,QAAQ,CAAC,CAAD,CAA9C;AACA,QAAM,CAACkB,aAAD,EAAgBC,gBAAhB,IAAoCnB,QAAQ,CAAC,EAAD,CAAlD;AACA,QAAM,CAACoB,MAAD,EAASC,SAAT,IAAsBrB,QAAQ,CAAC,IAAD,CAApC;AACA,QAAM,CAACsB,aAAD,EAAgBC,gBAAhB,IAAoCvB,QAAQ,CAAC,KAAD,CAAlD;AACA,QAAM,CAACwB,aAAD,EAAgBC,gBAAhB,IAAoCzB,QAAQ,CAAC,KAAD,CAAlD;AAEA,QAAM,CAAC0B,MAAD,EAASC,SAAT,IAAsB3B,QAAQ,CAAC,EAAD,CAApC;AACA,QAAM,CAAC4B,UAAD,EAAaC,aAAb,IAA8B7B,QAAQ,CAAC,EAAD,CAA5C;AACA,QAAM,CAAC8B,SAAD,EAAYC,YAAZ,IAA4B/B,QAAQ,CAAC,EAAD,CAA1C;;AACA,QAAMgC,SAAS,GAAIpB,KAAD,IAAW;AACzBF,IAAAA,YAAY,CAACE,KAAD,CAAZ;;AACA,QAAIH,SAAS,KAAKG,KAAlB,EAAyB;AACrBF,MAAAA,YAAY,CAAC,IAAD,CAAZ;AACH;AACJ,GALD;;AAMAX,EAAAA,SAAS,CAAC,MAAM;AACZwB,IAAAA,gBAAgB,CAAC,IAAD,CAAhB;AACAzB,IAAAA,KAAK,CAACmC,GAAN,CAAW,GAAE7B,OAAQ,kBAAiBI,MAAM,CAAC0B,EAAG,EAAhD,EAAmDC,IAAnD,CAAwDC,QAAQ,IAAI;AAChE,UAAIA,QAAQ,CAACC,IAAb,EAAmB;AACfd,QAAAA,gBAAgB,CAAC,KAAD,CAAhB;AACAF,QAAAA,SAAS,CAACe,QAAQ,CAACC,IAAT,CAAc,CAAd,CAAD,CAAT;AACH;;AACDhB,MAAAA,SAAS,CAAC,IAAD,CAAT;AACH,KAND;AAOH,GATQ,EASN,EATM,CAAT;;AAUA,QAAMiB,kBAAkB,GAAIC,KAAD,IAAW;AAClCtB,IAAAA,cAAc,CAACsB,KAAD,CAAd;AACH,GAFD;;AAGA,QAAMC,YAAY,GAAG,MAAM;AACvB,QAAIC,QAAQ,GAAG,IAAIC,QAAJ,EAAf;;AACA,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG7B,KAAK,CAAC8B,MAA1B,EAAkCD,CAAC,EAAnC,EAAuC;AACnCF,MAAAA,QAAQ,CAACI,MAAT,CAAgB,OAAhB,EAAyB/B,KAAK,CAAC6B,CAAD,CAA9B;AACH;;AACD,QAAIlC,SAAS,KAAK,IAAlB,EAAwB;AAAEkB,MAAAA,SAAS,CAAC,4BAAD,CAAT;AAAyC,KAAnE,MACK;AAAEA,MAAAA,SAAS,CAAC,EAAD,CAAT;AAAe;;AACtB,QAAIT,aAAa,KAAK,EAAtB,EAA0B;AAAEW,MAAAA,aAAa,CAAC,uBAAD,CAAb;AAAwC,KAApE,MACK;AAAEA,MAAAA,aAAa,CAAC,EAAD,CAAb;AAAmB;;AAC1B,QAAIf,KAAK,CAAC8B,MAAN,KAAiB,CAArB,EAAwB;AAAEb,MAAAA,YAAY,CAAC,0CAAD,CAAZ;AAA0D,KAApF,MACK;AAAEA,MAAAA,YAAY,CAAC,EAAD,CAAZ;AAAkB;;AAEzB,QAAItB,SAAS,KAAK,IAAd,IAAsBS,aAAa,KAAK,EAAxC,IAA8CJ,KAAK,CAAC8B,MAAN,KAAiB,CAAnE,EACInB,gBAAgB,CAAC,IAAD,CAAhB;AACJ3B,IAAAA,KAAK,CAACgD,IAAN,CAAY,GAAE1C,OAAQ,SAAtB,EAAgCqC,QAAhC,EAA0CpC,UAAU,EAApD,EACK8B,IADL,CACUC,QAAQ,IAAI;AACd,UAAIA,QAAQ,CAACC,IAAb,EAAmB;AACf,cAAMA,IAAI,GAAG;AACTU,UAAAA,MAAM,EAAE/B,WADC;AAETgC,UAAAA,cAAc,EAAE9B,aAFP;AAGT+B,UAAAA,KAAK,EAAEzC,MAHE;AAIT0C,UAAAA,GAAG,EAAEzC,SAJI;AAKT0C,UAAAA,MAAM,EAAEf,QAAQ,CAACC;AALR,SAAb;AAOAvC,QAAAA,KAAK,CAACgD,IAAN,CAAY,GAAE1C,OAAQ,UAAtB,EAAiCiC,IAAjC,EAAuChC,UAAU,EAAjD,EAAqD8B,IAArD,CAA0DC,QAAQ,IAAI;AAClEf,UAAAA,SAAS,CAACe,QAAD,aAACA,QAAD,uBAACA,QAAQ,CAAEC,IAAX,CAAT;AACAZ,UAAAA,gBAAgB,CAAC,KAAD,CAAhB;AACH,SAHD,EAGG2B,KAHH,CAGSC,GAAG,IAAI;AACZ5B,UAAAA,gBAAgB,CAAC,KAAD,CAAhB;AACA6B,UAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACH,SAND;AAOH;AACJ,KAlBL,EAmBKD,KAnBL,CAmBWC,GAAG,IAAI;AACV5B,MAAAA,gBAAgB,CAAC,KAAD,CAAhB;AACA6B,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACH,KAtBL;AAuBH,GArCD;;AAsCA,sBAAO;AAAK,IAAA,SAAS,EAAC,8FAAf;AAAA,4BACH;AAAK,MAAA,SAAS,EAAC,oBAAf;AAAA,8BACI;AAAI,QAAA,SAAS,EAAC,uBAAd;AAAA,8BACY7C,MAAM,CAACgD,YADnB;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,eAII;AAAK,QAAA,SAAS,EAAC,MAAf;AAAA,kBACKhD,MAAM,CAACiD,MAAP,CAAcb,MAAd,GAAuB,CAAvB,IAA4BpC,MAAM,CAACiD,MAAP,CAAcC,GAAd,CAAkB,CAACC,IAAD,EAAOC,KAAP,kBAC3C;AAAK,UAAA,SAAS,EAAC,mBAAf;AAAA,kCACI;AAAK,YAAA,GAAG,EAAED,IAAI,CAACE,MAAf;AAAuB,YAAA,GAAG,EAAEF,IAAI,CAACG,IAAjC;AAAuC,YAAA,SAAS,EAAC;AAAjD;AAAA;AAAA;AAAA;AAAA,kBADJ,eAEI;AAAK,YAAA,SAAS,EAAC,aAAf;AAAA,oCACI;AAAI,cAAA,SAAS,EAAC,gBAAd;AAA+B,cAAA,OAAO,EAAE,MAAMjD,OAAO,CAACkD,IAAR,CAAa,cAAcJ,IAAI,CAACzB,EAAhC,CAA9C;AAAA,wBAAoFyB,IAAI,CAACG;AAAzF;AAAA;AAAA;AAAA;AAAA,oBADJ,eAEI;AAAM,cAAA,SAAS,EAAC,oBAAhB;AAAA,yBAAsCH,IAAI,CAACK,IAA3C;AAAA;AAAA;AAAA;AAAA;AAAA,oBAFJ,oBAE+D;AAAM,cAAA,SAAS,EAAC,+BAAhB;AAAA,wBAAiDL,IAAI,CAACM;AAAtD;AAAA;AAAA;AAAA;AAAA,oBAF/D;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFJ,eAMI;AAAI,YAAA,SAAS,EAAC,eAAd;AAAA,4BAAgCN,IAAI,CAACO,KAArC;AAAA;AAAA;AAAA;AAAA;AAAA,kBANJ;AAAA,WAAwCN,KAAxC;AAAA;AAAA;AAAA;AAAA,gBADyB;AADjC;AAAA;AAAA;AAAA;AAAA,cAJJ,eAeI;AAAK,QAAA,SAAS,EAAC,qEAAf;AAAA,gCACI;AAAM,UAAA,SAAS,EAAC,uBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,eAEI;AAAM,UAAA,SAAS,EAAC,uBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,cAfJ,eAmBI;AAAK,QAAA,SAAS,EAAC,oCAAf;AAAA,gCACI;AAAM,UAAA,SAAS,EAAC,uBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,eAEI;AAAM,UAAA,SAAS,EAAC,mBAAhB;AAAA,0BAAsCO,MAAM,CAAC3D,MAAM,CAAC4D,MAAR,CAAN,CAAsBC,OAAtB,CAA8B,CAA9B,CAAtC;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,cAnBJ;AAAA;AAAA;AAAA;AAAA;AAAA,YADG,eAyBH;AAAK,MAAA,SAAS,EAAC,oCAAf;AAAA,8BACI;AAAA,gCACI;AAAG,UAAA,SAAS,EAAC,iCAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,eAEI;AAAG,UAAA,SAAS,EAAC,8BAAb;AAAA,qBAA6C7D,MAAM,CAAC8D,aAAP,CAAqBC,UAAlE,OAA+E/D,MAAM,CAAC8D,aAAP,CAAqBE,SAApG,QAAiHhE,MAAM,CAAC8D,aAAP,CAAqBG,YAAtI;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFJ,eAGI;AAAG,UAAA,SAAS,EAAC,8BAAb;AAAA,qBAA6CjE,MAAM,CAAC8D,aAAP,CAAqBI,OAAlE,QAA6ElE,MAAM,CAAC8D,aAAP,CAAqBK,IAAlG,QAA0GnE,MAAM,CAAC8D,aAAP,CAAqBM,KAA/H;AAAA;AAAA;AAAA;AAAA;AAAA,gBAHJ;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,EAMKpE,MAAM,CAACqE,IAAP,KAAgB,IAAhB,iBAAwB;AAAA,gCACrB;AAAG,UAAA,SAAS,EAAC,iCAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADqB,eAErB;AAAK,UAAA,SAAS,EAAC,qDAAf;AAAA,oBACKrE,MAAM,CAACqE;AADZ;AAAA;AAAA;AAAA;AAAA,gBAFqB;AAAA;AAAA;AAAA;AAAA;AAAA,cAN7B;AAAA;AAAA;AAAA;AAAA;AAAA,YAzBG,EAuCCzD,MAAM,KAAK,IAAX,gBAAkB;AAAK,MAAA,SAAS,EAAC,yBAAf;AAAA,8BACd;AAAI,QAAA,SAAS,EAAC,uBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADc,eAEd;AAAK,QAAA,SAAS,EAAC,+EAAf;AAAA,gCACI,QAAC,YAAD;AAAc,UAAA,kBAAkB,EAAEkB,kBAAlC;AAAsD,UAAA,WAAW,EAAEtB;AAAnE;AAAA;AAAA;AAAA;AAAA,gBADJ,eAEI;AAAK,UAAA,SAAS,EAAC,aAAf;AAAA,kCACI;AAAG,YAAA,SAAS,EAAC,cAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,eAEI;AAAK,YAAA,SAAS,EAAC,mBAAf;AAAA,sBAEQL,OAAO,CAAC+C,GAAR,CAAY,CAACC,IAAD,EAAOC,KAAP,kBACR;AAEI,cAAA,OAAO,EAAE5B,SAAS,CAAC8C,IAAV,CAAe,IAAf,EAAqBnB,IAAI,CAAC/C,KAA1B,CAFb;AAGI,cAAA,SAAS,EAAG,GAAEH,SAAS,KAAKkD,IAAI,CAAC/C,KAAnB,IAA4B,kBAAmB,2EAHjE;AAAA,wBAIK+C,IAAI,CAAC/C;AAJV,eACSgD,KADT;AAAA;AAAA;AAAA;AAAA,oBADJ;AAFR;AAAA;AAAA;AAAA;AAAA,kBAFJ,EAcKlC,MAAM,KAAK,EAAX,iBAAiB;AAAA,sBAAIA;AAAJ;AAAA;AAAA;AAAA;AAAA,kBAdtB;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFJ,eAkBI;AAAK,UAAA,SAAS,EAAC,kBAAf;AAAA,kCACI;AAAG,YAAA,SAAS,EAAC,cAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,eAEI;AAAU,YAAA,SAAS,EAAC,sDAApB;AACI,YAAA,IAAI,EAAE,CADV;AAEI,YAAA,QAAQ,EAAGqD,KAAD,IAAW5D,gBAAgB,CAAC4D,KAAK,CAACC,MAAN,CAAazC,KAAd;AAFzC;AAAA;AAAA;AAAA;AAAA,kBAFJ,EAKKX,UAAU,KAAK,EAAf,iBAAqB;AAAA,sBAAIA;AAAJ;AAAA;AAAA;AAAA;AAAA,kBAL1B;AAAA;AAAA;AAAA;AAAA;AAAA,gBAlBJ,eAyBI;AAAK,UAAA,SAAS,EAAC,WAAf;AAAA,kCACI;AAAG,YAAA,SAAS,EAAC,mBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,eAEI,QAAC,QAAD;AAAU,YAAA,QAAQ,EAAEb,QAApB;AAA8B,YAAA,KAAK,EAAED;AAArC;AAAA;AAAA;AAAA;AAAA,kBAFJ,EAGKgB,SAAS,KAAK,EAAd,iBAAoB;AAAA,sBAAIA;AAAJ;AAAA;AAAA;AAAA;AAAA,kBAHzB;AAAA;AAAA;AAAA;AAAA;AAAA,gBAzBJ,eA8BI;AAAQ,UAAA,OAAO,EAAEU,YAAjB;AAA+B,UAAA,QAAQ,EAAEhB,aAAzC;AAAwD,UAAA,SAAS,EAAC,0CAAlE;AAAA,oBACKA,aAAa,GAAG,YAAH,GAAkB;AADpC;AAAA;AAAA;AAAA;AAAA,gBA9BJ;AAAA;AAAA;AAAA;AAAA;AAAA,cAFc;AAAA;AAAA;AAAA;AAAA;AAAA,YAAlB,gBAoCS;AAAK,MAAA,SAAS,EAAC,yBAAf;AAAA,6BACL;AAAI,QAAA,SAAS,EAAC,uBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADK;AAAA;AAAA;AAAA;AAAA,YA3EV;AAAA;AAAA;AAAA;AAAA;AAAA,UAAP;AAkFH,CAzJD;;GAAMjB,W;UAGcN,U;;;KAHdM,W;AA0JN,eAAeA,WAAf","sourcesContent":["import axios from \"axios\";\nimport { useEffect, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport Dropzone from \"../UI/Dropzone\";\nimport RatingReview from \"../UI/Rating\";\nimport { baseURL } from \"../../api\";\nimport { authHeader } from \"../../functions\";\nimport LoadingList from \"../UI/LoadingList\";\nconst OrderDetail = ({ detail }) => {\n    const [activeFit, setActiveFit] = useState(null);\n    const listFit = [{ label: 'Too Small' }, { label: 'True to Fit' }, { label: 'Too Large' }]\n    const history = useHistory();\n    const [files, setFiles] = useState([]);\n    const [valueRating, setValueRating] = useState(5);\n    const [reviewContent, setReviewContent] = useState('');\n    const [review, setReview] = useState(null);\n    const [loadingReview, setLoadingReview] = useState(false);\n    const [loadingUpload, setLoadingUpload] = useState(false);\n\n    const [errFit, setErrFit] = useState('');\n    const [errContent, setErrContent] = useState('');\n    const [errUpload, setErrUpload] = useState('');\n    const handleFit = (label) => {\n        setActiveFit(label)\n        if (activeFit === label) {\n            setActiveFit(null);\n        }\n    }\n    useEffect(() => {\n        setLoadingReview(true);\n        axios.get(`${baseURL}/reviews?order=${detail.id}`).then(response => {\n            if (response.data) {\n                setLoadingReview(false);\n                setReview(response.data[0])\n            }\n            setReview(null);\n        });\n    }, [])\n    const handleChangeRating = (value) => {\n        setValueRating(value);\n    }\n    const handleReview = () => {\n        let formData = new FormData();\n        for (let i = 0; i < files.length; i++) {\n            formData.append(\"files\", files[i]);\n        }\n        if (activeFit === null) { setErrFit('You must select one option') }\n        else { setErrFit('') }\n        if (reviewContent === '') { setErrContent('You must enter review') }\n        else { setErrContent('') }\n        if (files.length === 0) { setErrUpload('You must upload least one image or video') }\n        else { setErrUpload('') }\n\n        if (activeFit !== null && reviewContent !== '' && files.length !== 0)\n            setLoadingUpload(true);\n        axios.post(`${baseURL}/upload`, formData, authHeader())\n            .then(response => {\n                if (response.data) {\n                    const data = {\n                        rating: valueRating,\n                        review_content: reviewContent,\n                        order: detail,\n                        fit: activeFit,\n                        images: response.data\n                    }\n                    axios.post(`${baseURL}/reviews`, data, authHeader()).then(response => {\n                        setReview(response?.data);\n                        setLoadingUpload(false);\n                    }).catch(err => {\n                        setLoadingUpload(false);\n                        console.log(err)\n                    })\n                }\n            })\n            .catch(err => {\n                setLoadingUpload(false);\n                console.log(err)\n            })\n    }\n    return <div className=\"lg:border-l lg:ml-6 lg:pl-6 lg:w-1/3 lg:mt-0 mt-6 w-full md:flex md:justify-between lg:block\">\n        <div className=\"md:w-1/2 lg:w-full\">\n            <h2 className=\"font-semibold text-sm\">\n                Order #{detail.number_order}\n            </h2>\n            <div className=\"mt-4\">\n                {detail.dishes.length > 0 && detail.dishes.map((item, index) => (\n                    <div className=\"flex mt-3 text-xs\" key={index}>\n                        <img src={item.imgUrl} alt={item.name} className=\"w-10 rounded-sm\" />\n                        <div className=\"flex-1 mx-2\">\n                            <h2 className=\"cursor-pointer\" onClick={() => history.push('/product/' + item.id)}>{item.name}</h2>\n                            <span className=\"mt-2 text-gray-400\">{item.size} - </span> <span className=\"text-gray-400  mt-2 uppercase\">{item.color}</span>\n                        </div>\n                        <h2 className=\"font-semibold\">${item.price}</h2>\n                    </div>))}\n            </div>\n            <div className=\"flex justify-between my-4 border-b border-dotted pb-3 w-2/3 ml-auto\">\n                <span className=\"font-semibold text-xs\">Shipping fee</span>\n                <span className=\"font-semibold text-xs\">$0.00</span>\n            </div>\n            <div className=\"flex justify-between w-2/3 ml-auto\">\n                <span className=\"font-semibold text-md\">Total</span>\n                <span className=\"font-bold text-md\">${Number(detail.amount).toFixed(2)}</span>\n            </div>\n        </div>\n        <div className=\"md:w-1/2 md:pl-8 lg:w-full lg:pl-0\">\n            <div>\n                <p className=\"font-semibold text-sm mt-4 mb-1\">Your shipping address :</p>\n                <p className=\"text-xs italic text-gray-500\">{detail.info_shipping.first_name} {detail.info_shipping.last_name}, {detail.info_shipping.phone_number}</p>\n                <p className=\"text-xs italic text-gray-500\">{detail.info_shipping.address}, {detail.info_shipping.city}, {detail.info_shipping.state}</p>\n            </div>\n            {detail.note !== null && <div>\n                <p className=\"font-semibold text-sm mt-4 mb-1\">Note your order :</p>\n                <div className=\"bg-gray-100 p-2 text-xs border italic text-gray-500\">\n                    {detail.note}\n                </div>\n            </div>}\n        </div>\n        {\n            review === null ? <div className=\"md:w-1/2 lg:w-full mt-4\">\n                <h2 className=\"font-semibold text-sm\">Your rating and reviews</h2>\n                <div className=\" border px-3.5 py-6 flex flex-col items-center justify-center rounded-md mt-3\">\n                    <RatingReview handleChangeRating={handleChangeRating} valueRating={valueRating} />\n                    <div className=\"w-full mt-4\">\n                        <p className=\"text-xs ml-1\">Size & Fit of the product</p>\n                        <div className=\"text-xs flex mt-2\">\n                            {\n                                listFit.map((item, index) => (\n                                    <div\n                                        key={index}\n                                        onClick={handleFit.bind(null, item.label)}\n                                        className={`${activeFit === item.label && 'border-green-600'} border  h-10 w-1/3 flex items-center justify-center mx-1 cursor-pointer `}>\n                                        {item.label}\n                                    </div>\n                                ))\n                            }\n                        </div>\n                        {errFit !== '' && <p>{errFit}</p>}\n                    </div>\n                    <div className=\"w-full mt-4 px-1\">\n                        <p className=\"text-xs ml-1\">Review content</p>\n                        <textarea className=\"w-full rounded-lg border p-4 outline-none mt-2 block\"\n                            rows={3}\n                            onChange={(event) => setReviewContent(event.target.value)} />\n                        {errContent !== '' && <p>{errContent}</p>}\n                    </div>\n                    <div className=\"mt-4 px-1\">\n                        <p className=\"text-xs ml-1 mb-2\">Upload images</p>\n                        <Dropzone setFiles={setFiles} files={files} />\n                        {errUpload !== '' && <p>{errUpload}</p>}\n                    </div>\n                    <button onClick={handleReview} disabled={loadingUpload} className=\"h-10 bg-black text-white px-4 rounded-sm\">\n                        {loadingUpload ? 'Loading...' : 'ADD REVIEW'}\n                    </button>\n                </div>\n            </div> : <div className=\"md:w-1/2 lg:w-full mt-4\">\n                <h2 className=\"font-semibold text-sm\">Your rating and reviews</h2>\n            </div>\n\n        }\n\n    </div>\n}\nexport default OrderDetail;"]},"metadata":{},"sourceType":"module"}